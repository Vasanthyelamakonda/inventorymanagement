{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add Sheet</title>
    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <!-- Retina iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="144x144" href="http://placehold.it/144.png/000/fff">
    <!-- Retina iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="114x114" href="http://placehold.it/114.png/000/fff">
    <!-- Standard iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="72x72" href="http://placehold.it/72.png/000/fff">
    <!-- Standard iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="57x57" href="http://placehold.it/57.png/000/fff">
    <!-- Styles -->

    <link href="{% static 'assets/css/lib/font-awesome.min.css'%}" rel="stylesheet">
    <link href="{% static 'assets/css/lib/themify-icons.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/lib/owl.carousel.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/lib/owl.theme.default.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/lib/menubar/sidebar.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/lib/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/lib/helper.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    <script type="text/javascript">
        function loadtotal()
        {
            document.getElementById('total').value=parseInt(document.getElementById('Openingbal').value)+parseInt(document.getElementById('plant').value);
        }
        function loadsale()
        {
            document.getElementById('sale').value=document.getElementById('total').value-document.getElementById('Closingbal').value;
        }
        function loadamt()
        {
            document.getElementById('amount').value=document.getElementById('rate').value * document.getElementById('sale').value;
        }
        function checkdate()
        {
           var sdate=document.getElementById('date').value;
           if(sdate==""){
            alert('please select date');
            return false;
           }
           return true;
        }
        function checkbrand()
        {
           var bname=document.getElementById('brandname').value;
           if(bname==""){
            alert('please select brand');
            return false;
           }
           return true;
        }
        function isValidDate(date) {
 
 // Date format: YYYY-MM-DD
 var datePattern = /^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/;

 // Check if the date string format is a match
 var matchArray = date.match(datePattern);
 if (matchArray == null) {
     return false;
 }

 // Remove any non digit characters
 var dateString = date.replace(/\D/g, ''); 

 // Parse integer values from the date string
 var year = parseInt(dateString.substr(0, 4));
 var month = parseInt(dateString.substr(4, 2));
 var day = parseInt(dateString.substr(6, 2));

 // Define the number of days per month
 var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

 // Leap years
 if (year % 400 == 0 || (year % 100 != 0 && year % 4 == 0)) {
     daysInMonth[1] = 29;
 }

 if (month < 1 || month > 12 || day < 1 || day > daysInMonth[month - 1]) {
     return false;
 }
 return true;
}
        </script>
    <style>
    
        /* Add animation to the form */
        .form-group {
            animation: slide-in 0.5s ease-out;
        }

        @keyframes slide-in {
            from {
                transform: translateX(-50%);
            }

            to {
                transform: translateX(0);
            }
        }

        /* Add a background color to the form container */
        form {
            background-color: transparent;
            padding: 47px;
            margin: 0 0px;
            max-width: 700px;
        }

        /* Add background color to the input fields and select boxes */
        input,
        select {
            background-color: #fff;
        }

        /* Add background color to the submit button */
        button[type="submit"] {
            background-color: #4CAF50;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
        }

        /* Change the background color of the submit button on hover */
        button[type="submit"]:hover {
            background-color: #45a049;
        }

        /* Use the flexbox layout to align the form elements in a row */
        form {
            display: flex;
            flex-wrap: wrap;
        }

        /* Set the width of each form element to 50% */
        .form-group {
            width: 120%;
            padding: 0 10px;
        }

        /* Make the submit button full width */
        button[type="submit"] {
            width: 100%;
            margin-top: 20px;
            margin-bottom: 20px;
        }


        /* Make required * red */
        .required {
            color: red;
        }
    </style>
</head>

<body>

    <div class="sidebar sidebar-hide-to-small sidebar-shrink sidebar-gestures">
        <div class="nano">
            <div class="nano-content">
                <ul>
                    <div class="logo">
                       
                            <span>Sri Sai Thirumala Wines</span>
                        </a>
                    </div>
                    <li class="label"></li>
                    <li><a href="{% url 'dailysheetemp' %}" class="sideba"><i class="ti-home"></i> Daily Sheet</a></li>
                    <li><a href="{% url 'stockmanagementemp' %}" class="sideba"><i class="ti-home"></i> Stock
                            Management</a></li>

                    <li><a href="{% url 'brandsandpriceemp' %}"><i class="ti-calendar"></i> Brands & Price List </a>
                    </li>



                    <li><a href="{% url 'emplogout' %}"><i class="ti-close"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="float-left">
                        <div class="hamburger sidebar-toggle">
                            <span class="line"></span>
                            <span class="line"></span>
                            <span class="line"></span>
                        </div>
                    </div>

                    <div>

                    </div>
                    <div class="dropdown dib">
                        <div class="header-icon" data-toggle="dropdown">
                            <span class="user-avatar">Krishna Yelamakonda
                                <i class="ti-angle-down f-s-10"></i>
                            </span>
                            <div class="drop-down dropdown-profile dropdown-menu dropdown-menu-right">

                                <div class="dropdown-content-body">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                <i class="ti-power-off"></i>
                                                <span>Logout</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form id="addsheet" name="addsheet" method="post">
                        {%csrf_token%}
                        {%if previous %}
                        <input type="hidden" name="form_id" value="nodata">
                        {%else%}
                        <input type="hidden" name="form_id" value="getdata">
                        {%endif%}
                      
                        <div class="form-group">
                            
                            <label for="date">Date</span></label>
                            <input type="date" class="form-control" id="date" name="date" >
                        </div>
                        <div class="form-group">
                          
                            <p> Brands
                                <select name="brandname" class="form-control">
                                    {% for results in brand  %}
                                    <option value="{{ results.brands}}">{{ results.brands}}</option>
                                    {% endfor %} I
                                    </select>
                            </p>
                           
                                
                           
                            <input type="submit" name="button" value="Get Data"/>
                        
                        </div>
                        <div class="form-group">
                            <label for="ml">ML</label>
                            <input type="number" class="form-control" id="ml" name="ml">
                        </div>
                        <div class="form-group">
                            <label for="Openingbal">O.B</label>
                            <input type="number" class="form-control" id="Openingbal" name="Openingbal" value="{{previous.Closing_bal}}" >
                            
                        </div>
            
                       
                        <div class="form-group">
                            <label for="plant">plant</label>
                            <input type="number" class="form-control" id="plant" name="plant" value="0" onchange="loadtotal()">
                        </div>
                        <div class="form-group">
                            <label for="total">Total</label>
                            <input type="number" class="form-control" id="total" name="total" value="0"  
                        >
                        </div>
                        
                        <div class="form-group">
                            <label for="Closingbal">C.B </span></label>
                            <input type="number" class="form-control" id="Closingbal"  value="0" name="Closingbal" onchange="loadsale()"/>
                        </div>
                        <div class="form-group">
                            <label for="sale">Sale</label>
                            <input type="number" class="form-control" id="sale" name="sale"  value="0" onchange="loadamt()">
                        </div>
                        <div class="form-group">
                            <label for="rate">Rate</label>
                            <input type="number" class="form-control" id="rate" name="rate"   value="{{previous.MRP}}" onchange="loadamt()">
                        </div>
                        

                        <input type="submit" value="Add" name="Add" class="btn btn-success" onclick="return checkdate()" onclick="return checkbrand()" onclick="return isValidDate()"
                            style="width: 100%; margin-top: 20px; margin-bottom: 20px;"></input>
                        <br />


                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>